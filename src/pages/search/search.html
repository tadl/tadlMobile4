<ion-header>
  <ion-navbar hideBackButton="true">
    <button ion-button left menuToggle menuToggle="left" >
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title mode="ios">Search Catalog</ion-title>
    <button ion-button right menuToggle menuToggle="right">
      <ion-icon name="contact"></ion-icon>
    </button>
  </ion-navbar>
</ion-header>
<!--
    advanced: boolean = this.navParams.get('advanced') || false
    query: string = this.navParams.get('query')
    results:Array<{any}> = []
    page: number = this.navParams.get('page') || 0
    qtype: string = this.navParams.get('qtype') || 'keyword'
    format: string = this.navParams.get('format') || 'all'
    location: string = this.navParams.get('location') || 'all'
    available: boolean = this.navParams.get('available') || false
    physical: boolean = this.navParams.get('physical') || false
-->


<ion-content padding>
    <form (ngSubmit)="get_results()" block>
    <!--<form (ngSubmit)="this.nav.push(searchPage, {query: this.query}, {animate:false})" block>-->
        <ion-item col-sm-12>
            <ion-toggle item-start [(ngModel)]="this.advanced" name="advanced"></ion-toggle>
            <ion-input type="text" placeholder="Search" [(ngModel)]="this.query" name="query"></ion-input>
            <button ion-button item-end type="submit">Search</button>
        </ion-item>
        <p *ngIf="advanced">
            I am advanced
        </p>
    </form>

	<ion-list-header *ngIf="query">
		Searching for {{query}}
	</ion-list-header>
	<ion-list>
		<ion-item-sliding *ngFor="let result of this.results">
            <ion-item>
                <ion-thumbnail item-start>
                    <img (click)="item.details(result.id)" src="https://catalog.tadl.org/opac/extras/ac/jacket/medium/r/{{result.id}}"/>
                </ion-thumbnail>
                <h2 *ngIf="result.title">{{result.title}}</h2>
                <h4 *ngIf="result.author">{{result.author}}</h4>
                <p>{{result.loc_copies_available}} available<span *ngIf="result.call_number"> â€¢ {{result.call_number}}</span></p>
            </ion-item>
            <ion-item-options>
                <button ion-button (click)="item.details(result.id)">Details</button>
                <button ion-button color="secondary">Place Hold</button>
            </ion-item-options>
		</ion-item-sliding>
	</ion-list>
</ion-content>
